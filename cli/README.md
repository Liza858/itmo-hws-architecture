# CLI

Реализация shell-подобной оболочки.

Структура наследования и зависимостей ![](https://github.com/ivanrybin/itmo-hws-architecture/blob/cli/terminal_class_diagram.svg)

# Детали реализации

Поддерживаемые команды:
- **echo [ARGS]** -- вывод аргументов
- **cat [FILE]**  -- вывод содержимого файла
- **wc [FILE]**   -- подсчет числа строк, слов и байт в файле/строке
- **pwd**         -- вывод текущей директории
- **exit**        -- выход из терминала
- **grep [-w] [-A n] [-i] pattern [FILE]** -- поиск подстроки в файле/строке

Поддерживаемые конструкции:
- `x=15` -- переменные
- `"$x"` -- двойные кавычки (подстановка переменных)
- `'abc $x'` --  одинарные кавычки (сохранение форматирования без подстановки)
- `cat file.txt | wc ` -- конвеер
- `echo "line1`  
`line2" 'new str'` -- многоразовый перенос строк при вводе строки в кавычках



# Внутреннее устройство
- все комманды наследуются от интерфейса command, поддерживающего метод execute() 
- все команды агрегируются в классе commands с помощью ассоциативного массива storage
- terminal работает с командами из commands, если они там есть, ничего не зная про их реализацию
- добавление новой команды в terminal происходит через:
    1. подключение заголовочного файла новой команды в commands.hpp 
    2. инициализацию объекта класса новой команды в commands::storage


# Сборка
Для сборки программы предусмотрен CMake-файл с возможностью запуска тестов, предусмотренных в test.cpp.

В реализации используются средства библиотеки C++ filesystem, поэтому для сборки terminal без CMake необходимо установить флаг линковки `-lstdc++fs`. (в CMake-файле все уже прописано)
   
